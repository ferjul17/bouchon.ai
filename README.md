# bouchon.ai

bouchon.ai is a service designed for collecting, inspecting, and debugging HTTP requests in real time. It provides developers with a straightforward way to examine webhooks and API calls by generating unique, temporary URLs that act as request endpoints. This tool is invaluable for understanding the structure and content of incoming HTTP requests during development and testing.

## Features

- Create bins with unique URLs to capture HTTP requests
- Inspect request details including headers, payloads, and query parameters
- Real-time updates via WebSocket
- RESTful API for programmatic access
- No database required (in-memory storage)

## Architecture

This project follows a hexagonal architecture (also known as ports and adapters) to separate the core domain logic from external concerns:

- **Domain Layer**: Contains the core business logic and entities
  - Models: `Bin`, `Request`
  - Ports: Interfaces that define how the domain interacts with the outside world
- **Application Layer**: Contains services that orchestrate domain operations
  - Services: `BinService`
- **Infrastructure Layer**: Contains adapters that implement the ports
  - Primary Adapters: API (Hono), WebSocket
  - Secondary Adapters: In-memory repository

## Tech Stack

- [Hono](https://hono.dev/) - Lightweight web framework
- [TypeScript](https://www.typescriptlang.org/) - Type-safe JavaScript
- [WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API) - Real-time communication
- [Vitest](https://vitest.dev/) - Testing framework
- [ESLint](https://eslint.org/) & [Prettier](https://prettier.io/) - Code quality tools

## Getting Started

### Prerequisites

- Node.js 20.x or later
- npm or yarn

### Installation

```bash
# Clone the repository
git clone https://github.com/yourusername/bouchon.ai.git
cd bouchon.ai

# Install dependencies
pnpm install

# Start the development server
pnpm run dev
```

The server will start at http://localhost:3000

### Usage

#### Creating a Bin

```bash
# Using curl
curl -X POST http://localhost:3000/api/bins -H "Content-Type: application/json" -d '{"name":"My Test Bin"}'

# Or visit the homepage and click "Create a New Bin"
```

#### Sending Requests to a Bin

Once you have created a bin, you can send any HTTP request to the bin's URL:

```bash
# Replace BIN_ID with your actual bin ID
curl -X POST http://localhost:3000/b/BIN_ID/anything -H "Content-Type: application/json" -d '{"hello":"world"}'
```

#### Viewing Requests

You can view the requests sent to a bin by:

1. Using the API: `GET /api/bins/BIN_ID`
2. Connecting to the WebSocket endpoint for real-time updates

#### WebSocket API

Connect to the WebSocket endpoint to receive real-time updates:

```javascript
const ws = new WebSocket('ws://localhost:3000/ws')

// Listen for messages
ws.onmessage = event => {
  const data = JSON.parse(event.data)
  console.log('Received:', data)
}

// Subscribe to a bin
ws.send(JSON.stringify({ type: 'SUBSCRIBE', binId: 'your-bin-id' }))
```

## API Reference

### Bins

- `GET /api/bins` - List all bins
- `POST /api/bins` - Create a new bin
- `GET /api/bins/:id` - Get a specific bin
- `DELETE /api/bins/:id` - Delete a bin

### Requests

- `ANY /b/:id/*` - Send a request to a bin (captures any HTTP method, path, headers, and body)

## Development

```bash
# Run tests
pnpm test

# Run tests with coverage
pnpm run test:coverage

# Lint code
pnpm run lint

# Format code
pnpm run format

# Build for production
pnpm run build

# Start production server
pnpm start
```

## CI/CD

This project uses GitHub Actions for continuous integration:

- Runs tests with coverage reporting
- Lints code
- Builds the project
- Archives build artifacts

## AI Generation

This entire project, including its code, documentation, and configuration, has been fully generated by an AI.

## License

This project is licensed under the ISC License.
